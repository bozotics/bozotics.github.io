<!DOCTYPE html>
<!--
	Minimal Mistakes Jekyll Theme 4.19.2 by Michael Rose
	Copyright 2013-2019 Michael Rose - mademistakes.com | @mmistakes
	Free for personal and commercial use under the MIT license
	https://github.com/mmistakes/minimal-mistakes/blob/master/LICENSE
-->
<html lang="en" class="no-js">
	<head>
		<meta charset="utf-8" />

		<!-- begin _includes/seo.html -->
		<title>History | Transcendence</title>
		<meta
			name="description"
			content="Warning: this section is really lengthy, and probably would not be as helpful as the other sections. However, we faced many problems with our electronics as beginners especially with little people guiding us along. Hence, we hope that through highlighting our learning process other beginners can benefit! So read on to laugh at our incompetence or for a very long drawn explanation of why we chose certain components."
		/>

		<meta property="og:type" content="article" />
		<meta property="og:locale" content="en_US" />
		<meta property="og:site_name" content="Transcendence" />
		<meta property="og:title" content="History" />
		<meta
			property="og:url"
			content="https://bozo.infocommsociety.com/open/elec/history/"
		/>

		<meta
			property="og:description"
			content="Warning: this section is really lengthy, and probably would not be as helpful as the other sections. However, we faced many problems with our electronics as beginners especially with little people guiding us along. Hence, we hope that through highlighting our learning process other beginners can benefit! So read on to laugh at our incompetence or for a very long drawn explanation of why we chose certain components."
		/>

		<meta
			property="article:published_time"
			content="2020-05-02T08:00:00+08:00"
		/>

		<meta
			property="article:modified_time"
			content="2020-07-09T22:12:58+08:00"
		/>

		<link
			rel="canonical"
			href="https://bozo.infocommsociety.com/open/elec/history/"
		/>

		<script type="application/ld+json">
			{
				"@context": "https://schema.org",

				"@type": "Person",
				"name": null,
				"url": "https://bozo.infocommsociety.com/"
			}
		</script>

		<!-- end _includes/seo.html -->

		<link
			href="/feed.xml"
			type="application/atom+xml"
			rel="alternate"
			title="Transcendence Feed"
		/>

		<!-- https://t.co/dKP3o1e -->
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />

		<script>
			document.documentElement.className =
				document.documentElement.className.replace(/\bno-js\b/g, "") + " js ";
		</script>

		<!-- For all browsers -->
		<link rel="stylesheet" href="/assets/css/main.css" />

		<!--[if IE]>
			<style>
				/* old IE unsupported flexbox fixes */
				.greedy-nav .site-title {
					padding-right: 3em;
				}
				.greedy-nav button {
					position: absolute;
					top: 0;
					right: 0;
					height: 100%;
				}
			</style>
		<![endif]-->

		<!-- start custom head snippets -->

		<style>
			ul.visible-links li.masthead__menu-item a[href="/open/intro/"]:before {
				transform: scaleX(1);
			}

			ul.hidden-links li.masthead__menu-item a[href="/open/intro/"] {
				color: #fff;
				background: #0092ca;
			}
		</style>

		<!-- insert favicons. use https://realfavicongenerator.net/ -->
		<link rel="icon" href="/assets/images/eagle ver 2.1.3.1-lowres.jpg" />

		<!-- end custom head snippets -->
	</head>

	<body class="layout--single">
		<nav class="skip-links">
			<h2 class="screen-reader-text">Skip links</h2>
			<ul>
				<li>
					<a href="#site-nav" class="screen-reader-shortcut"
						>Skip to primary navigation</a
					>
				</li>
				<li>
					<a href="#main" class="screen-reader-shortcut">Skip to content</a>
				</li>
				<li>
					<a href="#footer" class="screen-reader-shortcut">Skip to footer</a>
				</li>
			</ul>
		</nav>

		<!--[if lt IE 9]>
			<div class="notice--danger align-center" style="margin: 0;">
				You are using an <strong>outdated</strong> browser. Please
				<a href="https://browsehappy.com/">upgrade your browser</a> to improve
				your experience.
			</div>
		<![endif]-->

		<div class="masthead">
			<div class="masthead__inner-wrap">
				<div class="masthead__menu">
					<nav id="site-nav" class="greedy-nav">
						<a class="site-logo" href="/"
							><img
								loading="lazy"
								src="/assets/images/eagle%20ver%202.1.3.1-transparent-lowres.png"
								alt=""
						/></a>

						<a class="site-title" href="/">
							Transcendence
							<span class="site-subtitle"
								>The fine line between innovation and insanity</span
							>
						</a>
						<ul class="visible-links">
							<li class="masthead__menu-item">
								<a href="/about/">About</a>
							</li>
							<li class="masthead__menu-item">
								<a href="/open/intro/">Open</a>
							</li>
							<li class="masthead__menu-item">
								<a href="/lightweight/intro/">Lightweight</a>
							</li>
							<li class="masthead__menu-item">
								<a href="/rescue/intro/">Rescue</a>
							</li>
							<li class="masthead__menu-item">
								<a href="/blog/">Blog</a>
							</li>
							<li class="masthead__menu-item">
								<a href="/contact/">Contact</a>
							</li>
							<li class="masthead__menu-item">
								<a href="/resources/">Resources</a>
							</li>
						</ul>

						<button class="search__toggle" type="button">
							<span class="visually-hidden">Toggle search</span>
							<svg
								class="icon"
								width="16"
								height="16"
								xmlns="http://www.w3.org/2000/svg"
								viewBox="0 0 15.99 16"
							>
								<path
									d="M15.5,13.12L13.19,10.8a1.69,1.69,0,0,0-1.28-.55l-0.06-.06A6.5,6.5,0,0,0,5.77,0,6.5,6.5,0,0,0,2.46,11.59a6.47,6.47,0,0,0,7.74.26l0.05,0.05a1.65,1.65,0,0,0,.5,1.24l2.38,2.38A1.68,1.68,0,0,0,15.5,13.12ZM6.4,2A4.41,4.41,0,1,1,2,6.4,4.43,4.43,0,0,1,6.4,2Z"
									transform="translate(-.01)"
								></path>
							</svg>
						</button>

						<button class="greedy-nav__toggle hidden" type="button">
							<span class="visually-hidden">Toggle menu</span>
							<div class="navicon"></div>
						</button>
						<ul class="hidden-links hidden"></ul>
					</nav>
				</div>
			</div>
		</div>

		<div class="initial-content">
			<div id="main" role="main">
				<div class="sidebar sticky">
					<nav class="nav__list">
						<input id="ac-toc" name="accordion-toc" type="checkbox" />
						<label for="ac-toc">Toggle menu</label>
						<ul class="nav__items">
							<li>
								<a href="/open/intro/"
									><span class="nav__sub-title">Introduction</span></a
								>
							</li>

							<li>
								<a href="/open/mech/"
									><span class="nav__sub-title">Mechanical</span></a
								>

								<ul>
									<li><a href="/open/mech/general/">General Info</a></li>

									<li><a href="/open/mech/drive/">Drive System</a></li>

									<li><a href="/open/mech/mirror/">Mirror</a></li>

									<li><a href="/open/mech/dribbler/">Dribbler</a></li>

									<li><a href="/open/mech/assorted/">Assorted Parts</a></li>
								</ul>
							</li>

							<li>
								<a href="/open/elec/"
									><span class="nav__sub-title">Electronics</span></a
								>

								<ul>
									<li><a href="/open/elec/design/">Design</a></li>

									<li><a href="/open/elec/circuits/">Circuits</a></li>

									<li><a href="/open/elec/components/">Components</a></li>

									<li><a href="/open/elec/selection/">Selection Process</a></li>

									<li><a href="/open/elec/soldering/">Soldering</a></li>

									<li>
										<a href="/open/elec/history/" class="active">History</a>
									</li>
								</ul>
							</li>

							<li>
								<a href="/open/cam/"
									><span class="nav__sub-title">Camera</span></a
								>

								<ul>
									<li><a href="/open/cam/general/">General Info</a></li>

									<li><a href="/open/cam/track/">Tracking Algorithm</a></li>

									<li><a href="/open/cam/gui/">GUI</a></li>

									<li><a href="/open/cam/communication/">Communication</a></li>
								</ul>
							</li>

							<li>
								<a href="/open/strat/"
									><span class="nav__sub-title">Strategy</span></a
								>
							</li>

							<li>
								<a href="/open/debug/"
									><span class="nav__sub-title">Debugging</span></a
								>
							</li>

							<li>
								<a href="/open/afi/"><span class="nav__sub-title">AFI</span></a>
							</li>
						</ul>
					</nav>
				</div>

				<article
					class="page"
					itemscope
					itemtype="https://schema.org/CreativeWork"
				>
					<meta itemprop="headline" content="History" />
					<meta
						itemprop="description"
						content="Warning: this section is really lengthy, and probably would not be ashelpful as the other sections. However, we faced many problems with ourelectronics as beginners especially with little people guiding us along. Hence,we hope that through highlighting our learning process other beginners canbenefit! So read on to laugh at our incompetence or for a very long drawnexplanation of why we chose certain components."
					/>
					<meta itemprop="datePublished" content="2020-05-02T08:00:00+08:00" />
					<meta itemprop="dateModified" content="2020-07-09T22:12:58+08:00" />

					<div class="page__inner-wrap">
						<header>
							<h1 id="page-title" class="page__title" itemprop="headline">
								History
							</h1>
						</header>

						<section class="page__content" itemprop="text">
							<aside class="sidebar__right sticky">
								<nav class="toc">
									<header>
										<h4 class="nav__title">
											<i class="fas fa-history"></i> History
										</h4>
									</header>
									<ul class="toc__menu">
										<li>
											<a href="#sensors">Sensors</a>
											<ul>
												<li>
													<a href="#motor-drivers">Motor Drivers</a>
													<ul>
														<li><a href="#motor-current">Motor Current</a></li>
														<li>
															<a href="#solenoid-current">Solenoid Current</a>
														</li>
													</ul>
												</li>
												<li>
													<a href="#µcs">µCs</a>
													<ul>
														<li>
															<a href="#initial-inspiration"
																>Initial Inspiration</a
															>
														</li>
														<li>
															<a href="#328p-experiments">328p Experiments</a>
														</li>
														<li><a href="#programmers">Programmers</a></li>
														<li><a href="#spoilt-µcs">Spoilt µCs</a></li>
													</ul>
												</li>
												<li><a href="#imu">IMU</a></li>
											</ul>
										</li>
										<li>
											<a href="#circuit-boards">Circuit Boards</a>
											<ul>
												<li>
													<a href="#pcb-trace-widths">PCB trace widths</a>
													<ul>
														<li><a href="#other-woes">Other woes</a></li>
													</ul>
												</li>
												<li><a href="#connectors">Connectors</a></li>
												<li><a href="#shift-to-smd">Shift to SMD</a></li>
												<li><a href="#test-pcb">Test PCB</a></li>
											</ul>
										</li>
										<li>
											<a href="#interference">Interference</a>
											<ul>
												<li><a href="#communication">Communication</a></li>
												<li>
													<a href="#crosstalk-on-pcbs">Crosstalk on PCBs</a>
												</li>
											</ul>
										</li>
									</ul>
								</nav>
							</aside>

							<p>
								<strong>Warning:</strong> this section is really lengthy, and
								probably would not be as helpful as the other sections. However,
								we faced many problems with our electronics as beginners
								especially with little people guiding us along. Hence, we hope
								that through highlighting our learning process other beginners
								can benefit! So read on to laugh at our incompetence or for a
								very long drawn explanation of why we chose certain components.
							</p>

							<hr />

							<h2 id="sensors">Sensors</h2>

							<p>
								When we started RoboCup back in 2017, we were given a set of
								sensors / drivers that were the leftovers from whatever our
								seniors used. With these sensors, there was little documentation
								as they were usually from JoinMax (the company that produces the
								RCU and the motor we are currently using) and they were
								obsolete.
							</p>

							<p>
								Making matters worse, a lot of them were already broken from
								years of use, so we were not always sure whether we were doing
								something wrong or whether the sensor itself was broken.
							</p>

							<h3 id="motor-drivers">Motor Drivers</h3>

							<p>
								Our first challenge was to get a moving robot. To do so, at the
								very least we needed motor drivers and a compass. The only motor
								drivers we had were
								<a href="https://www.robotplayer.com/products/post.asp?pid=294"
									>from JoinMax</a
								>
								that had ports which were directly compatible with our motors
								(Tamiya connectors).
							</p>

							<p>
								At that time, we had not touched Arduino programming yet, and
								the only time we interacted with anything similar was with LEGO
								in the WRO competition. Hence, we had no notion on how the
								Arduino controls the motor driver, and thus was clueless on how
								it even worked. We did not learn about the inner workings of a
								motor yet, thus we assumed that they were magic, that our motor
								could only work with motor drivers that were specifically made
								for it (e.g. had the same connectors). This cost us a lot of
								time as we went around finding this exact (very old) model of
								motor driver when most of them were broken already. However,
								looking back, this was the main reason we wanted to shift away
								from breakout boards and pre-made modules as we wanted to have a
								high level of understanding and integration within our circuits.
							</p>

							<p>
								Learning points: All these misconceptions were cleared only when
								we started programming and thus started to understand how these
								sensors worked. Sensors cannot work without programming or
								wiring, so learning and doing both in tandem is essential to
								ensure full understanding of what you are doing. Also, do make
								use of the multitude of amazing resources available (for free!)
								on the web, or make use of your seniors and other connections to
								ask for help.
							</p>

							<p>
								After moving away from the JoinMax motor drivers, we followed
								our seniors previous purchases to use the
								<a href="https://www.pololu.com/product/2991"
									>Pololu 18v17 motor driver</a
								>. However, these were really expensive and we kept shorting
								them due to our negligence. To decrease the rate that we bleed
								money, we switched again to some cheaper Chinese VNH2SP30
								breakout board (passed down from seniors also).
							</p>

							<p>
								We then realised that the circuit on the breakout board was
								quite simple. Since we wanted to integrate everything in a bid
								to decrease unnecessary jumper cables and messiness, this was
								the main motivation behind our
								<a href="#shift-to-smd"
									>switch to surface mounted devices (SMD)</a
								>.
							</p>

							<p>
								We did think about using the motor driver ICs on the Pololu
								motor driver (some TI DRV88xx) over the VNH5019 since the
								overall board size of the Pololu was tiny, however their
								schematics were not open sourced and the accompanying circuitry
								seemed much more complex.
							</p>

							<h4 id="motor-current">Motor Current</h4>

							<p>
								After our
								<a href="#pcb-trace-widths">light flickering experience</a> and
								one of our batteries started bloating (presumably due to high
								current draw) we wanted to know exactly how much current our
								motors were drawing to cause that extreme power losses to the
								whole PCB. The VNH5019 motor driver we use has current sense
								functionality, and thus after the 2019 competitions we hooked
								that pin up to the Teensy and drove the robot around.
							</p>

							<p>
								We found that the JoinMax motors we used drew over
								<strong>10A</strong> every time it changed directions! This was
								with a max PWM duty cycle applied of ≈60%. Hence, after this
								investigation we decided to
								<a href="#pcb-trace-widths">run wires outside of our PCB</a>
								directly to motor drivers to prevent potential issues in our
								PCB.
							</p>

							<h4 id="solenoid-current">Solenoid Current</h4>

							<p>
								Similar to the
								<a href="#motor-current">motor current experiments</a> above, we
								connected our solenoid to a resistor and oscilloscope to see how
								much power it draws. We found that it drew
								<a href="/resources/Electronics1/#/solenoid-scope"
									>≈10A of current</a
								>
								at 60V despite having a coil resistance of ≈20Ω. We are not sure
								what we did wrong, but a definite conclusion is our solenoid
								draws a lot of power and
								<a href="#pcb-trace-widths">wires should be run</a> directly to
								it as well, just like the motors.
							</p>

							<h3 id="µcs">µCs</h3>

							<p>
								When we were designing our first robot, we were handed an
								Arduino Mega and Nano to use as our µCs. We were told that the
								Mega was to be used as the main controller, and the Nano was
								there only to process the Ultrasonic Sensor’s data. However,
								using the Arduino Mega was way too unsuited for our usage: It
								cost SGD $50+ to get one, and it had too many pins which we
								would never need. While preparing for our 2nd RoboCup in 2018,
								it was one of the first things we wanted to change.
							</p>

							<h4 id="initial-inspiration">Initial Inspiration</h4>

							<p>
								One of the main teams that we looked up to at that time (and
								still do) was
								<a href="http://rcjinput.blog.jp/">INPUT RCJ from Japan</a> as
								they were really open with their blog which allowed us to learn
								a lot from them. In particular, while studying their poster we
								realised that they do not use an Arduino, but rather they use
								ST’s Nucleo boards. At that time, the concept of µCs was new to
								us: we thought the Arduino was just like the LEGO EV3, the
								<strong>only</strong> controller that we could use. However this
								opened up a new world of possibilities and choices, and
								eventually influenced our
								<a href="/open/elec/components/#microcontrollers-%C2%B5c"
									>choice of µCs</a
								>.
							</p>

							<p>
								That year, the speed of the µC was important as that was the
								year we made the switch from IR to passive orange ball, and we
								didn’t know how much computing power we would need to detect it
								yet, thus more was better. Hence, we looked to 32 bit processors
								which were newer and had higher speeds. However, in that year we
								were still very inexperienced and thought that the Arduino IDE
								was the only (easy) way to program, and that was the main reason
								we chose the Teensy.
							</p>

							<p>
								For our 3rd competition in 2019, the next thing to replace was
								the Nano: we now know that it is there to serve as a “second
								core”, a sub-processor, and not solely to process the ultrasonic
								sensor’s data. Although the Nano worked well for this purpose,
								we wanted to test something new for future development and use.
								Our first instinct was to go with ST’s Nucleo lineup as it was
								the first non-Arduino MCU we know of thanks to INPUT, and it was
								quite cheap. However, it was really huge and expensive compared
								to the “Blue Pill” board based upon a STM32F103C8T6. Upon
								further researching however, it seems to have some issues with
								its USB circuitry. We ended up settling on a cloned “Maple Mini”
								which was touted as a good alternative at roughly the same price
								to the blue pill.
							</p>

							<h4 id="328p-experiments">328p Experiments</h4>

							<p>
								For one of our other projects, we required a very small and
								light PCB, hence we needed to integrate a µC directly rather
								than use boards like the Maple Mini. We first started with the
								ATMEGA328P because it was the most popular µC in the Arduino
								ecosystem, being used in the Uno and Nano. We referenced
								schematics of the Nano to figure out what external components
								(resistors, capacitors, etc.) the IC required. It ended up being
								quite a painless process, from designing to programming over
								ISP.
							</p>

							<p>
								After that successful run, we decided to do the same with our
								2020 robots. We chose the STM32F103 over the 328P because it was
								cheaper (economies of scale in china!) and apart from a few
								soldering issues it works well! In the future, we would
								definitely like to transition to smaller and cheaper µCs because
								the STM32F1 is overkill for our purposes, and smaller µCs with a
								TSSOP package are easier to solder anyways.
							</p>

							<h4 id="programmers">Programmers</h4>

							<p>
								We did not want to program over USB for the STM32 because the
								proper reset circuitry was very complex. Hence, the other
								alternative was to use the Serial Wire Debug (SWD) interface. At
								this point, we programmed everything in Arduino and we did not
								understand the entire ARM ecosystem, and by extension what a
								programmer was used for. For anyone facing the same problem: a
								programmer / debugger is basically a USB port and serial
								monitor, but better since it allows you to step through code one
								line at a time and view values of any variables you want.
							</p>

							<p>
								Since we only had experience in the Arduino ecosystem, despite
								the lack of debugging support for STM32 devices we continued
								using Arduino to program in 2020. However, we are hoping to
								eventually move away from Arduino, or to the new Arduino Pro IDE
								if debugging support is present there.
							</p>

							<h4 id="spoilt-µcs">Spoilt µCs</h4>

							<p>
								We somehow managed to blow up a lot of µCs in our preparation,
								from the Arduino Mega to Nano to Maple Mini and Teensy. Sadly,
								this was enough to fill 2 full boxes of unusable µCs. Most of
								these accidents were caused by shorts somewhere on our robot
								(because we were always rushing for time we were very careless),
								and in some other cases we sent 5v signals to the Teensy 3.6
								(which could only receive 3.3v max).
							</p>

							<h3 id="imu">IMU</h3>

							<p>
								The IMU was another area that we struggled in. We first used the
								CMPS11 from our seniors in 2017 and 2018. However, in both those
								years we faced huge issues from the instability and inaccuracy,
								since it tended to drift by more than 10° every 90°. Sometimes
								this drifting even got worse after calibration. This was
								especially bad since it only happened at competition venues, and
								we could not replicate these issues in our lab.
							</p>

							<p>
								Hence, we tried the BNO055 in 2018 for the international
								competition (in lightweight) after some research since it was
								easily available on Taobao. This worked very very well, and it
								was a dream come true since we faced no issues with calibration
								or accuracy. However, our bad luck caught up and it somehow
								decided to stop working a week before the competition, hanging
								the Teensy and making our entire robot unresponsive.
							</p>

							<p>
								Despite this, we continued using it in 2019 because it was such
								a step up over the alternative CMPS11. We did try others like
								the MPU9250 or MPU6050, however the particular sensor board we
								purchased just refused to work from the very start. Anyways,
								from other teams like LJ Stand in 2018 it does not seem to work
								very well compared to the BNO055.
							</p>

							<p>
								That was a bad choice since the same thing happened and it
								stopped working a week before the competitions. In an attempt to
								salvage our robot, we purchased
								<a href="https://www.adafruit.com/product/3463"
									>Adafruit NXP Precision IMUs</a
								>
								which were
								<a
									href="https://learn.adafruit.com/comparing-gyroscope-datasheets"
									>recommended by Adafruit</a
								>
								themselves for its high accuracy. However, we soon discovered we
								could not use it since our only sub-µC was bogged down by other
								tasks like reading distance sensor values. To use this IMU, we
								needed dedicated µCs.
							</p>

							<p>
								We only discovered that we needed to put the BNO055 on its own
								I<sup>2</sup>C line and not share it with other sensors in 2020.
								By then, we had bought two Adafruit IMUs a year ago while trying
								to salvage our 2019 robot. Hence, we decided to continue using
								the Adafruit IMUs for our open robot since we had the space to
								include dedicated µCs to process sensor fusion algorithms, and
								leave the BNO055 for our lightweight robot or other teams since
								it was simpler to use.
							</p>

							<hr />

							<h2 id="circuit-boards">Circuit Boards</h2>

							<p>
								Our first circuit boards were copied from our seniors; at that
								time, we didn’t know how to make our own, and we didn’t even
								know what all the wires and connections meant, and so we copied
								our senior’s old circuits. This was seen most clearly with our
								“motor board”, a breakout circuit board for our motor drivers.
								While trying to make sense of how to control a motor driver, we
								referred to our senior’s circuit but failed to understand what
								it did, and ended up copying it wholesale. This kind-of worked
								at first, however as we needed to add more sensors and circuits
								onto our board it quickly got messy and confusing. It got to a
								point where we had 5 different circuit boards, all side by side
								with jumper wires connected between them, when they could have
								been easily integrated into 1 clean circuit board. This lesson
								was the main motivation behind our first PCB
							</p>

							<h3 id="pcb-trace-widths">PCB trace widths</h3>

							<p>
								For our 2nd year competing in 2018, we wanted to shift away from
								the messiness and inelegance of the past. Seeing as our senior
								team had made a PCB themselves in 2017, we decided to design a
								PCB ourselves where everything was fully integrated and we
								didn’t have to deal with any wires. The first design, very
								surprisingly, worked “fully” without any ad-hoc soldering to fix
								our circuit. However, our entire board was designed with 8 mil
								traces, the minimum trace width in SparkFun’s EAGLE DRC file. We
								did not realise this was a problem until we attempted to power
								our solenoid, slowly increasing the voltage in the boost
								converter until we heard a bang along with some magic smoke.
								This killed everything on the PCB, from the teensy to the 4
								(very expensive) Pololu drivers on there.
							</p>

							<p>
								However, apparently we did not learn from these mistakes since
								in 2019, some traces in our PCBs were still too thin. This
								resulted in every solenoid kick or every change in direction of
								our
								<a href="/open/mech/drive/#motors">(very high current)</a>
								motors to temporarily shut our light sensor LEDs off. Although
								this is not confirmed, we suspect it affected our light sensors
								as well, resulting in false positives after solenoid kicks.
							</p>

							<p>
								Hence, in 2020 we did not want to repeat this mistake again.
								Since we did not want to spend extra on a 4 layer board for
								thicker trace widths, and after our
								<a href="#motor-current">motor</a> and
								<a href="#solenoid-current">solenoid current investigations</a>,
								we
								<a href="/open/elec/design/#trace-widths"
									>run 18AWG wires directly</a
								>
								to high current sinks.
							</p>

							<h4 id="other-woes">Other woes</h4>

							<p>
								For our 2018 beginner PCB forays, we made a number of other
								stupid mistakes and we hope others can learn from our example to
								not make these mistakes as well:
							</p>

							<ul>
								<li>
									<p>
										In 2018, for both PCBs (the first failed one and the second
										less failed one) we randomly laid out components and used an
										autorouter. This resulted in us being unable to fit
										everything into 2 layers (since we did not really think
										things through) and because we were rushing at that time,
										ordered a (very expensive!) 4 layered PCB for a very very
										simple circuit.
									</p>

									<p>
										For anyone looking to create a PCB for the first time as
										well: do not rush into things. Our 2018 PCBs were very
										problematic because of that. Just because a schematic is
										created exactly according to tested circuits does not
										guarantee success, do take the time to think about the board
										layout and positioning of components.
									</p>

									<p>
										As an example, do not put high powered motor drivers on the
										opposite side of the battery connectors, the (very thick)
										power traces would have to travel across the PCB and block
										all other signals to reach your drivers! These high powered
										traces running all over the place also results in
										interference and noise all over.
									</p>
								</li>
								<li>
									<p>
										Another major mistake we made was not understanding the
										ground pour. We thought that the ground pour meant all the
										grounds in the circuit will automagically be connected,
										however that is not the case, and in our 2018 PCBs the
										grounds of the entire circuit (including high power ones)
										only converged at 1 tiny point &lt;20mils wide.
									</p>

									<p>
										Do remember that a ground pour (or any polygon) is just a
										very fat trace which expands to take up all
										<strong>available</strong> area. If little area is available
										for traces to pass through, the ground pour will not help!
										This was another reason for our bad trace widths since
										currents did not have a good return path due to small ground
										pour connections.
									</p>

									<p>
										One tip to maximise the use of ground pours is to use vias
										to connect the ground pours on both layers together. This
										allows you to bypass any trace easily by just going through
										the bottom layer. Do ensure that for high current paths,
										multiple vias are used since a via is quite thin and may
										heat up / act as a bottleneck!
									</p>
								</li>
							</ul>

							<p>
								To gawk at my failures, take a look at the old 2018 PCB design
								files
								<a href="https://github.com/bozotics/soccer2018/tree/master/PCB"
									>here</a
								>!
							</p>

							<h3 id="connectors">Connectors</h3>

							<p>
								Along with our shift away from messy wires, we also decided to
								use the RJ11 6P6C jack for our connections, since we wanted a
								keyed jack that would ensure we never plug things in the wrong
								way. However, this was way bigger than we anticipated, and now
								we’re left with way too many unused RJ11 jacks and plugs and
								breakout boards in our lab (oops).
							</p>

							<p>
								Right now, we use SH1.0 connectors in some scenarios, and use
								normal 2.54mm spaced pins in others. We just make sure to label
								each pin clearly and correctly so we would not plug things in
								the wrong way.
							</p>

							<p>
								Previously, we connected motors and high current wires via screw
								terminals. However, we experienced some incidents where wires
								came loose and almost got shorted together. This was especially
								bad since all wires connected to screw terminals were high
								powered! That is why we shifted to use XT60 connectors or wires
								soldered directly onto the PCBs for our high powered
								connections.
							</p>

							<!---see if have any old photos--->
							<!---link to /elec/circuits also--->

							<h3 id="shift-to-smd">Shift to SMD</h3>

							<p>
								Our 2018 PCBs were a step forward compared to the (many) circuit
								boards of yesteryear, but they still didn’t look like PCBs we
								are used to seeing in our computers / electronics. This was when
								we decided to step into the world of SMD components, to
								eliminate all breakout (PCB) boards in our PCB and integrate
								everything into one. This allowed us to cut a lot of wires and
								save space.
							</p>

							<p>
								It wasn’t easy, as we had to read through datasheets which were
								very foreign to us and try to understand complex terminologies
								when we are just trying to accomplish an easy task. Many of
								these datasheets also contain info that aren’t really important
								to us, like stability or temperature information, and it was
								difficult to filter out the important data from the irrelevant
								ones.
							</p>

							<p>
								A tip if you are just starting out on a similar path: a good
								starting point is the recommended application schematic. Many
								times, apart from V<sub>max</sub> we don’t really need that much
								info on its characteristics, and skip right to the application
								schematic to reference and build our circuit from there. Attempt
								to understand the rationale of every component used in that
								application schematic, that way you can optimise the circuit
								specifically to your needs.
							</p>

							<p>
								<a href="/open/elec/soldering/"
									>We also had a good time trying to figure out how to solder
									these components</a
								>
							</p>

							<h3 id="test-pcb">Test PCB</h3>

							<p>
								Since it was our first time using these ICs directly without a
								breakout board, we were not confident that it would work on the
								first try. We wanted to be able to test these components,
								however we required a 22*20cm PCB since that was the size of our
								robot. “Development Kits” sold by chip manufacturers themselves
								were either too expensive or didn’t really exist for the ICs we
								were testing.
							</p>

							<p>
								Hence, riding on JLCPCB’s USD $2 PCBs under 10*10cm, we decided
								to make a “test PCB” which was just a large breakout board of
								the various ICs we were planning to use. This proved to be
								useful: we found problems with our circuits, and ICs we wanted
								to use that weren’t suitable or just didn’t work were replaced.
								We have continued this practice for this year (2020), and if you
								are just starting out I would recommend this as well.
							</p>

							<hr />

							<h2 id="interference">Interference</h2>

							<h3 id="communication">Communication</h3>

							<p>
								Apart from the I<sup>2</sup>C woes we experienced
								<a href="#imu">from the BNO055</a>, we also read articles such
								as
								<a
									href="https://hackaday.com/2017/02/08/taking-the-leap-off-board-an-introduction-to-i2c-over-long-wires/"
									>this</a
								>
								describing how prone I<sup>2</sup>C is to interference. Although
								we have not faced any I<sup>2</sup>C interference issues apart
								from the BNO055, and since we needed to run many wires past high
								current and strong magnetic sources (motors and solenoid), we
								decided to play it safe and use UART as the main mode of
								communication between µCs.
							</p>

							<h3 id="crosstalk-on-pcbs">Crosstalk on PCBs</h3>

							<p>
								While routing our PCBs, especially in the very dense 1st layer
								PCB, we run traces parallel and very close to one another to fit
								all the components and signals onto a 2 layered PCB. From some
								research, we know that this can lead to interference and
								crosstalk. However, we really could not get enough space to
								separate the traces enough. This is another reason we
								<a href="/open/elec/design/#trace-widths"
									>run 18AWG wires directly</a
								>
								to high current sinks. From our testing so far, our signals on
								the 2020 PCB do not suffer from interference.
							</p>
						</section>

						<footer class="page__meta">
							<p class="page__date">
								<i class="fas fa-fw fa-calendar-alt" aria-hidden="true"></i>

								<strong>Updated:</strong>
								<time datetime="2020-07-09">July 9, 2020</time>
							</p>
						</footer>

						<nav class="pagination">
							<a
								href="/open/elec/soldering/"
								class="pagination--pager"
								title="Soldering
"
								>Previous</a
							>

							<a
								href="/open/cam/"
								class="pagination--pager"
								title="Camera
"
								>Next</a
							>
						</nav>
					</div>
				</article>
			</div>
		</div>

		<div class="search-content">
			<div class="search-content__inner-wrap">
				<form
					class="search-content__form"
					onkeydown="return event.key != 'Enter';"
				>
					<label class="sr-only" for="search">
						Enter your search term...
					</label>
					<input
						type="search"
						id="search"
						class="search-input"
						tabindex="-1"
						placeholder="Enter your search term..."
					/>
				</form>
				<div id="results" class="results"></div>
			</div>
		</div>

		<div id="footer" class="page__footer">
			<footer>
				<!-- start custom footer snippets -->

				<!-- end custom footer snippets -->
				<div class="page__footer-follow">
					<ul class="social-icons">
						<li><strong>Follow:</strong></li>

						<li>
							<a
								href="https://twitter.com/bozotics"
								rel="nofollow noopener noreferrer"
								><i class="fab fa-fw fa-twitter-square" aria-hidden="true"></i>
								Twitter</a
							>
						</li>

						<li>
							<a
								href="https://facebook.com/Bozotics-113608380186713"
								rel="nofollow noopener noreferrer"
								><i class="fab fa-fw fa-facebook-square" aria-hidden="true"></i>
								Facebook</a
							>
						</li>

						<li>
							<a
								href="https://github.com/bozotics"
								rel="nofollow noopener noreferrer"
								><i class="fab fa-fw fa-github" aria-hidden="true"></i>
								GitHub</a
							>
						</li>

						<li>
							<a
								href="https://instagram.com/bozotics"
								rel="nofollow noopener noreferrer"
								><i class="fab fa-fw fa-instagram" aria-hidden="true"></i>
								Instagram</a
							>
						</li>

						<li>
							<a href="/feed.xml"
								><i class="fas fa-fw fa-rss-square" aria-hidden="true"></i>
								Feed</a
							>
						</li>
					</ul>
				</div>

				<div class="page__footer-copyright">
					&copy; 2020 Transcendence. Powered by
					<a href="https://jekyllrb.com" rel="nofollow">Jekyll</a> &amp;
					<a
						href="https://mademistakes.com/work/minimal-mistakes-jekyll-theme/"
						rel="nofollow"
						>Minimal Mistakes</a
					>.
				</div>
			</footer>
		</div>

		<script src="/assets/js/main.min.js"></script>
		<script src="https://kit.fontawesome.com/4eee35f757.js"></script>

		<script src="/assets/js/lunr/lunr.min.js"></script>
		<script src="/assets/js/lunr/lunr-store.js"></script>
		<script src="/assets/js/lunr/lunr-en.js"></script>

		<!-- Global site tag (gtag.js) - Google Analytics -->
		<script
			async
			src="https://www.googletagmanager.com/gtag/js?id=UA-166112888-1"
		></script>
		<script>
			window.dataLayer = window.dataLayer || [];
			function gtag() {
				dataLayer.push(arguments);
			}
			gtag("js", new Date());

			gtag("config", "UA-166112888-1", { anonymize_ip: false });
		</script>

		<aside class="sidebar__top" id="topButton">
			<a href="#top"><i class="fas fa-angle-double-up fa-2x"></i></a>
		</aside>
		<script>
			/* When the user scrolls down 100px from the top of the document, show the button */
			$(window).scroll(function () {
				if ($(this).scrollTop() >= 100) {
					$("#topButton").fadeIn(200);
				} else {
					$("#topButton").fadeOut(200);
				}
			});
		</script>
	</body>
</html>
